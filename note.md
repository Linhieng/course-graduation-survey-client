# 笔记

## 容易混淆

horizontal 水平
vertical 垂直。

divider 分割线，水平就是横的，vertical 就是竖的。（这不是废话吗？）

form 表单，水平，指的是 form-item 中的 label 和 input 在同一行。
垂直，指的是 label 和 input 分为两行。
行内，不用说。

space 间距，水平，指的是元素之间水平排列，左右之间有间距，但最左和最右是没有间距的。
垂直，指的就是元素之间上下排列，上下之间有间距，但顶部和底部是没有间距的。
而且一个元素默认是不会撑满宽度的，需要指定 fill

## shore 放在一个位置的好处

在此之前，我有想过 store 真的要全部都放在 store 文件夹中吗？
如果我只是在这个页面中使用到这些状态，那我直接在该页面路径下创建一个 store.ts 不好吗？

我觉得确实不太好，因为我无法保证后续不会在其他组件中继续使用 store 中的内容。
而且我可能将页面移到其他位置。这个时候，如果我是将 store 统一放在 @/store 文件夹中的话，
我可以直接拷贝整个组件，就完成了迁移。而如果代码中是使用相对路径 ./store 的话，就会需要自己
手动处理。

## 天坑

技术不达标之前，永远不要动那些依赖！
打包遇到的问题：
- 类型报错，这个简单，直接 @ts-ignore
- less 变量找不到，在 issue 中找到[解决方案](https://github.com/arco-design/arco-design-vue/issues/3038#issuecomment-2014537494)，直接手动添加全局变量。
- `[vite:reporter] chunk.moduleIds is not iterable`。 同样在 issue 中找到[解决方案](https://github.com/vitejs/vite/issues/15277#issuecomment-1855326703)，也就是将 vite 从 4.5 变为 4.3.

打包成功了，但打包后的项目完全是跑不了的，有啥用？index 中连 script 都没有。而且打包时，停留在 rendering chunks (70)... 
那里停留了特别长的时间！得一分多钟。

是我哪里弄错了？

## 其他

组件不能有多个根元素，因为这样无法有动画，从而导致渲染不出路由的内容。
```
[Vue warn]: Component inside <Transition> renders non-element root node that cannot be animated. 
```

## 编辑模式

支持纯文本编辑模式，格式大概是这样的：

```
---
单行文本题
- 这里是标题
- 这里是描述，为空时也不能省略
---
多行文本题
- 这里是标题
- 这里是描述，为空时也不能省略
---
单选题
- 这里是标题
- 这里是描述
- 这是选项1
- 这里选项2
- 。。。
---
- 这里是标题
- 这里是描述
- 这是选项1
- 这里选项2
- 。。。
---
这里是特定的标题名称，跟在 --- 后面
- 标题
可以这样实现换行
- 描述，同样也可以
这样实现换行
```

目前大概就是上面的格式

## 记录
代码难点：
    • 布局的框架，现在还是用着 arco 的，不敢改
    • 路由的权限管理，这一块懂，但也是不敢改
    • 多组件之间的数据（通过统一的 store 处理）
    • 异步问题，渲染大数据量问题（渲染看不到的元素会影响性能）
    • 可视化问题（这一点是后台的难点，前端只需要渲染数据）
    • 用户消息机制（应该使用 web socket 实现，但还是使用轮询简单）
    • 代码消息机制（arco 用到了，但我还不懂为啥）
    • 换肤（这一点和 css 变量相关，不敢改，也不会改。）
    • 自适应的组件（没实现，就是宽度不够时，支持将一系列按钮坍塌为一个折叠项）
    • 表单的校验，这一点主要是对 store 的操作，目前有点熟悉了
    • api 请求的类型和批量处理（这一点也慢慢有了自己的模版了，有点熟悉了）
    • hook request 的实现（还不是很清楚）
    • localStorage 需要考虑内存问题，因为每份问卷都缓存了一份 localStorage，而且问题对象还不小！


可以说的项目亮点：
- 基本的注册、登录、改密码、改信息
- 国际化（这个简单，但能吹）
- 支持用户行为日志
- 创建问卷支持丰富的皮肤设置
- 创建问卷支持聚焦模式
- 支持可视化展示问卷的信息、访问量。
- 问卷的行为日志（待添加）
- 支持消息机制（待实现）
- 支持问卷导入导出功能（待实现）
- 支持答案的导入导出功能（待实现）
- 可视化答案（待实现，待分析）
- 支持全局搜索功能（待实现，目前想法就是直接搜索路由吧，这样至少有个能用的搜索框）
- 支持编辑模式。


笔记：
    • pinia 中 getter 中似乎会丢失响应式，如何返回的是 state.abc ，然后我直接修改了整个 abc 时。
    • vscode 有点 bug，重命名 props 中的名字时，会导致其他文件也被更改。巨坑！可能连 node_modules 中的文件也被修改了，导致我得重新删除 node_module，再下载回来。
    • 还是不要想着优化代码了，不要想着把重复代码写在一起，特别是重要的那部分代码。我现在改了一下 forEach 中的重设 order，结果就导致有 bug 了！
    • vue 组件的根元素，样式会受到父元素的影响！这是因为块元素身上同样会有 data-xxxx 属性。该特性是为了让父元素能够控制子组件的根元素样式。解决方案就是外面再加一层无样式的 div 。
    • js 中的 同名 .d.ts 会影响 vscode 的函数跳转功能。因为声明文件中没有给出对应函数。
