# 笔记

组件不能有多个根元素，因为这样无法有动画，从而导致渲染不出路由的内容。
```
[Vue warn]: Component inside <Transition> renders non-element root node that cannot be animated. 
```

## 编辑模式

支持纯文本编辑模式，格式大概是这样的：

```
---
单行文本题
- 这里是标题
- 这里是描述，为空时也不能省略
---
多行文本题
- 这里是标题
- 这里是描述，为空时也不能省略
---
单选题
- 这里是标题
- 这里是描述
- 这是选项1
- 这里选项2
- 。。。
---
- 这里是标题
- 这里是描述
- 这是选项1
- 这里选项2
- 。。。
---
这里是特定的标题名称，跟在 --- 后面
- 标题
可以这样实现换行
- 描述，同样也可以
这样实现换行
```

目前大概就是上面的格式

## 记录
代码难点：
    • 布局的框架，现在还是用着 arco 的，不敢改
    • 路由的权限管理，这一块懂，但也是不敢改
    • 多组件之间的数据（通过统一的 store 处理）
    • 异步问题，渲染大数据量问题（渲染看不到的元素会影响性能）
    • 可视化问题（这一点是后台的难点，前端只需要渲染数据）
    • 用户消息机制（应该使用 web socket 实现，但还是使用轮询简单）
    • 代码消息机制（arco 用到了，但我还不懂为啥）
    • 换肤（这一点和 css 变量相关，不敢改，也不会改。）
    • 自适应的组件（没实现，就是宽度不够时，支持将一系列按钮坍塌为一个折叠项）
    • 表单的校验，这一点主要是对 store 的操作，目前有点熟悉了
    • api 请求的类型和批量处理（这一点也慢慢有了自己的模版了，有点熟悉了）
    • hook request 的实现（还不是很清楚）
    • localStorage 需要考虑内存问题，因为每份问卷都缓存了一份 localStorage，而且问题对象还不小！


可以说的项目亮点：
- 基本的注册、登录、改密码、改信息
- 国际化（这个简单，但能吹）
- 支持用户行为日志
- 创建问卷支持丰富的皮肤设置
- 创建问卷支持聚焦模式
- 支持可视化展示问卷的信息、访问量。
- 问卷的行为日志（待添加）
- 支持消息机制（待实现）
- 支持问卷导入导出功能（待实现）
- 支持答案的导入导出功能（待实现）
- 可视化答案（待实现，待分析）
- 支持全局搜索功能（待实现，目前想法就是直接搜索路由吧，这样至少有个能用的搜索框）
- 支持编辑模式。


笔记：
    • pinia 中 getter 中似乎会丢失响应式，如何返回的是 state.abc ，然后我直接修改了整个 abc 时。
    • vscode 有点 bug，重命名 props 中的名字时，会导致其他文件也被更改。巨坑！可能连 node_modules 中的文件也被修改了，导致我得重新删除 node_module，再下载回来。
    • 还是不要想着优化代码了，不要想着把重复代码写在一起，特别是重要的那部分代码。我现在改了一下 forEach 中的重设 order，结果就导致有 bug 了！
    • vue 组件的根元素，样式会受到父元素的影响！这是因为块元素身上同样会有 data-xxxx 属性。该特性是为了让父元素能够控制子组件的根元素样式。解决方案就是外面再加一层无样式的 div 。
    • js 中的 同名 .d.ts 会影响 vscode 的函数跳转功能。因为声明文件中没有给出对应函数。
